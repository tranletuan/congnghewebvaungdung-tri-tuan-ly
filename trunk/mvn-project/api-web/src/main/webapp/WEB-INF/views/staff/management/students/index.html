<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring3-3.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
    <head th:include="template :: header" />
    <body>
        <div class="container">
            <div th:substituteby="template :: nav" />   
            <a th:href="@{/staff/management/students/new}" class="btn btn-primary float_right margin_button_bottom">Thêm Học Sinh Mới</a>
            <div class="clearfix"></div>
            <table id="table" style="table-layout: fixed; word-wrap: break-word;">
                <thead>
                    <tr>
                        <th>Mã Học Sinh</th>
                        <th>Họ Tên</th>
                        <th>Ngày Sinh</th>
                        <th>Giới Tính</th>                        
                        <th>Địa Chỉ</th>
                        <th>Ngày Nhập Học</th>
                        <th>Ngày Nghỉ Học</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:id="${hocsinh.getid()}" align="center" th:each="hocsinh: ${listHocSinh}">
                        <td th:text="${hocsinh.getmaHocSinh()}" id="maHocSinh"/>
                        <td th:text="${hocsinh.gethoTen()}" id="hoTen"/>                        
                        <td th:text="${#dates.format(hocsinh.getngaySinh(),'dd/MM/yyyy')}" id="ngaySinh"/>
                        <td th:text="${hocsinh.getgioiTinh()}==1?${'Nam'}:${'Nữ'}" id="gioiTinh"/>                        
                        <td th:text="${hocsinh.getdiaChi()}" id="diaChi"/>
                        <td th:text="${#dates.format(hocsinh.getngayNhapHoc(),'dd/MM/yyyy')}" id="ngayNhapHoc"/>
                        <td th:text="${#dates.format(hocsinh.getngayNghiHoc(),'dd/MM/yyyy')}" id="ngayNghiHoc"/>
                        <td>
                            <div class="btn-group">
                                <a th:href="@{'/staff/management/students/edit/'+${hocsinh.getmaHocSinh()}}" title="SỬa"><i class="icon-pencil icondemo"></i></a>
                                <a th:href="@{'/staff/management/students/delete/'+${hocsinh.getmaHocSinh()}}" title="Xóa" class="linkDelete" th:id="${hocsinh.getmaHocSinh()}"><i class="icon-trash"></i></a>
                            </div>                            
                        </td>
                    </tr>
                </tbody>
            </table>
            <div th:include="template :: footer"></div>
        </div>	
        <script th:inline="javascript">
            /*<![CDATA[*/
            var self;
            jQuery(document).ready(function() {
                jQuery("#table").dataTable({"bJQueryUI": true});
                COMMON.activeMenu("quanly_nav");
                $('#table').on('click','.linkDelete', function(){
                    self = $(this);                    
                    event.preventDefault(); 
                    console.log("Enter");
                    console.log(self);
                    $.ajax({
                        url: self[0].href,
                        type: 'DELETE',
                        data: ({studentId:self[0].id})
                    });
                    console.log("OUT");
                });
            });
            /*]]>*/            
        </script>    
    </body>
</html>